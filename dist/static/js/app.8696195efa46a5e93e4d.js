webpackJsonp([2],{0:function(t,e){},1:function(t,e){},"1qEj":function(t,e){},2:function(t,e){},3:function(t,e){},"8Y90":function(t,e){},Fw7l:function(t,e){},NHnr:function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=s("7+uW"),n={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",{attrs:{id:"app"}},[e("router-view")],1)},staticRenderFns:[]};var a=s("VU/8")({name:"App"},n,!1,function(t){s("sZAQ")},null,null).exports,o=s("/ocq"),r=s("mtWM"),l=s.n(r),c=s("mw3O"),h=s.n(c),d=l.a.create({baseURL:"/edispatch/invoice",timeout:2e4});d.defaults.paramsSerializer=function(t){return h.a.stringify(t)},d.interceptors.request.use(function(t){return t}),d.interceptors.response.use(function(t){return t&&t.data});var v=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return d(t)},u=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return v({method:"POST",url:"/create/batch",params:t})},p=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return v({method:"GET",url:"/order/byToken",params:t})},f=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return v({method:"GET",url:"/url/byToken",params:t})},m={render:function(){var t=this.$createElement;return(this._self._c||t)("div",{staticClass:"loadingMask",on:{touchmove:function(t){t.preventDefault()},mousewheel:function(t){t.preventDefault()}}},[this._m(0)])},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"loading"},[e("div",{staticClass:"dot"}),this._v(" "),e("div",{staticClass:"dot"}),this._v(" "),e("div",{staticClass:"dot"}),this._v(" "),e("div",{staticClass:"dot"}),this._v(" "),e("div",{staticClass:"dot"}),this._v(" "),e("div",{staticClass:"dot"}),this._v(" "),e("div",{staticClass:"dot"}),this._v(" "),e("div",{staticClass:"dot"})])}]};var _=s("VU/8")({data:function(){return{}}},m,!1,function(t){s("n1Mi")},"data-v-3f1099f2",null).exports,g={props:["msg","show"],data:function(){return{closeTimer:null}},watch:{show:function(){this.show&&this.autoClose()}},methods:{autoClose:function(){var t=this;clearTimeout(this.closeTimer),this.closeTimer=setTimeout(function(){t.$emit("close")},2e3)}}},C={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"message",class:{show:this.show}},[e("div",{staticClass:"errInfo"},[this._v(this._s(this.msg))])])},staticRenderFns:[]};var w=s("VU/8")(g,C,!1,function(t){s("wpyF")},"data-v-76492ab2",null).exports,y={components:{loading:_,message:w},data:function(){return{invoiceTitle:"",invoiceTitleType:1,nsrsbh:"",address:"",yhmz:"",yhzh:"",email:"",message:"",showMesage:!1,showLoading:!1,token:"",orderInfo:{}}},computed:{canSubmit:function(){return this.invoiceTitle&&this.email&&(2!=this.invoiceTitleType||2==this.invoiceTitleType&&this.nsrsbh)}},mounted:function(){var t=this.$route.query.token;this.token=t,this.getOrderInfo()},destroyed:function(){},methods:{openMesage:function(t){this.message=t,this.showMesage=!0},onCloseMessage:function(){this.showMesage=!1},checkInput:function(){return!!/^.*@.*$/.test(this.email)||(this.openMesage("请输入正确的邮箱"),!1)},getOrderInfo:function(){var t=this;this.showLoading=!0,p({token:this.token}).then(function(e){e&&300888==e.code?t.$router.push({name:"success"}):e&&100200==e.code?t.orderInfo=e&&e.data||{}:e&&t.openMesage(e.message)}).catch(function(e){t.openMesage(e)}).then(function(){t.showLoading=!1})},submit:function(){var t=this;if(this.canSubmit&&this.checkInput()){var e=this.invoiceTitle,s=this.invoiceTitleType,i=this.nsrsbh,n=this.address,a=this.yhzh,o=this.yhmz,r=this.email,l=this.orderInfo.orderId;this.showLoading=!0,u({orderIds:l,invoiceTitleType:s-1,invoiceTitle:e,nsrsbh:i,address:n,bankName:o,yhzh:a,email:r}).then(function(e){e&&100200==e.code?t.$router.push({name:"success"}):e&&t.openMesage(e.message)}).catch(function(e){t.openMesage(e)}).then(function(){t.showLoading=!1})}},chooseInvoiceTitleType:function(t){this.invoiceTitleType=t}}},b={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"createInvoice"},[s("div",{staticClass:"head"},[t._v("开票信息填写")]),t._v(" "),s("div",{staticClass:"ul nomargin"},[s("div",{staticClass:"li"},[s("label",{staticClass:"lb"},[t._v("开票金额")]),t._v(" "),s("span",{staticClass:"val price"},[t._v("¥"+t._s(t.orderInfo.price||"--"))])]),t._v(" "),s("div",{staticClass:"li vt"},[s("div",{staticClass:"vl"},[s("label",{staticClass:"lb"},[t._v("起始地址")]),t._v(" "),s("span",{staticClass:"val"},[t._v(t._s(t.orderInfo.startAddress)+" -- "+t._s(t.orderInfo.endAddress))])]),t._v(" "),s("div",{staticClass:"vl"},[s("label",{staticClass:"lb"},[t._v("服务时间")]),t._v(" "),s("span",{staticClass:"val"},[t._v(t._s(t.orderInfo.serviceTime||"-"))])])])]),t._v(" "),s("div",{staticClass:"ul"},[t._m(0),t._v(" "),s("div",{staticClass:"li"},[s("label",{staticClass:"lb"},[t._v("抬头类型")]),t._v(" "),s("div",{staticClass:"ttlx"},[s("span",{staticClass:"tti",class:{checked:1==t.invoiceTitleType},on:{click:function(e){return t.chooseInvoiceTitleType(1)}}},[t._v("个人")]),t._v(" "),s("span",{staticClass:"tti",class:{checked:2==t.invoiceTitleType},on:{click:function(e){return t.chooseInvoiceTitleType(2)}}},[t._v("企业")])])]),t._v(" "),s("div",{staticClass:"li"},[s("label",{staticClass:"lb"},[t._v("抬头名称")]),t._v(" "),s("input",{directives:[{name:"model",rawName:"v-model",value:t.invoiceTitle,expression:"invoiceTitle"}],staticClass:"input",attrs:{type:"text",placeholder:"请填写抬头名称（必填)"},domProps:{value:t.invoiceTitle},on:{input:function(e){e.target.composing||(t.invoiceTitle=e.target.value)}}})]),t._v(" "),2==t.invoiceTitleType?[s("div",{staticClass:"li"},[s("label",{staticClass:"lb"},[t._v("纳税人识别号")]),t._v(" "),s("input",{directives:[{name:"model",rawName:"v-model",value:t.nsrsbh,expression:"nsrsbh"}],staticClass:"input",attrs:{type:"text",placeholder:"需要与抬头准确匹配（必填)"},domProps:{value:t.nsrsbh},on:{input:function(e){e.target.composing||(t.nsrsbh=e.target.value)}}})]),t._v(" "),s("div",{staticClass:"li"},[s("label",{staticClass:"lb"},[t._v("单位地址")]),t._v(" "),s("input",{directives:[{name:"model",rawName:"v-model",value:t.address,expression:"address"}],staticClass:"input",attrs:{type:"text",placeholder:"请填写单位地址（选填)"},domProps:{value:t.address},on:{input:function(e){e.target.composing||(t.address=e.target.value)}}})]),t._v(" "),s("div",{staticClass:"li"},[s("label",{staticClass:"lb"},[t._v("开户银行")]),t._v(" "),s("input",{directives:[{name:"model",rawName:"v-model",value:t.yhmz,expression:"yhmz"}],staticClass:"input",attrs:{type:"text",placeholder:"请填写开户银行（选填)"},domProps:{value:t.yhmz},on:{input:function(e){e.target.composing||(t.yhmz=e.target.value)}}})]),t._v(" "),s("div",{staticClass:"li"},[s("label",{staticClass:"lb"},[t._v("银行账户")]),t._v(" "),s("input",{directives:[{name:"model",rawName:"v-model",value:t.yhzh,expression:"yhzh"}],staticClass:"input",attrs:{type:"text",placeholder:"请填写银行账户（选填)"},domProps:{value:t.yhzh},on:{input:function(e){e.target.composing||(t.yhzh=e.target.value)}}})])]:t._e()],2),t._v(" "),s("div",{staticClass:"ul"},[s("div",{staticClass:"li"},[s("label",{staticClass:"lb"},[t._v("电子邮箱")]),t._v(" "),s("input",{directives:[{name:"model",rawName:"v-model",value:t.email,expression:"email"}],staticClass:"input",attrs:{type:"text",placeholder:"请输入电子邮箱（必填)"},domProps:{value:t.email},on:{input:function(e){e.target.composing||(t.email=e.target.value)}}})])]),t._v(" "),s("div",{staticClass:"tips"}),t._v(" "),s("div",{staticClass:"submitBtn",class:{gray:!t.canSubmit},on:{click:t.submit}},[t._v("提交")]),t._v(" "),s("message",{attrs:{msg:t.message,show:t.showMesage},on:{close:t.onCloseMessage}}),t._v(" "),t.showLoading?s("loading"):t._e()],1)},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"li"},[e("label",{staticClass:"lb"},[this._v("发票类型")]),this._v(" "),e("span",{staticClass:"val"},[this._v("电子发票")])])}]};var T=s("VU/8")(y,b,!1,function(t){s("o6MU")},"data-v-1c661120",null).exports,$={render:function(){this.$createElement;this._self._c;return this._m(0)},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"success"},[e("div",{staticClass:"head"},[this._v("提交发票信息")]),this._v(" "),e("div",{staticClass:"info"},[e("p",{staticClass:"p1"},[this._v("您申请的电子发票信息，已提交成功!")]),this._v(" "),e("p",{staticClass:"p2"},[this._v("电子发票将于用车后3日之内，发送至邮箱或以短信的形式通知，请关注查收。")])])])}]};var z=s("VU/8")(null,$,!1,function(t){s("toNC")},"data-v-5c2afdfa",null).exports,x=s("iwQb");if("server"!==Object({NODE_ENV:"production"}).VUE_ENV){var M=s("ytml").default,k=s("H1WT");if("undefined"!=typeof window&&"Worker"in window&&-1===navigator.appVersion.indexOf("MSIE 10")){var E=s("Ukwz");k.GlobalWorkerOptions.workerPort=new E}var I=Object(x.a)(M(k))}else I=Object(x.a)({});var P=I;var N={components:{loading:_,message:w,pdf:s("VU/8")(P,null,!1,function(t){s("1qEj")},null,null).exports},data:function(){return{token:"",pdfPath:"",pdfProxyPath:"",message:"",showMesage:!1,showLoading:!1}},mounted:function(){var t=this.$route.query.token;this.token=t,this.getInvoice()},destroyed:function(){},methods:{getInvoice:function(){var t=this;this.showLoading=!0,f({token:this.token}).then(function(e){if(e&&100200==e.code){var s=e.data||{},i=s.invoiceUrl,n=s.proxyUrl;t.pdfPath=i,t.pdfProxyPath=n}else e&&t.openMesage(e.message)}).catch(function(e){t.openMesage(e)}).then(function(){t.showLoading=!1})},openMesage:function(t){this.message=t,this.showMesage=!0},onCloseMessage:function(){this.showMesage=!1}}},U={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"pdfView"},[s("div",{staticClass:"head"},[t._v(" 查看电子发票")]),t._v(" "),s("div",{staticClass:"pdfEmpty"},[t._v("暂不支持显示, 请下载后打开")]),t._v(" "),s("a",{staticClass:"downloadBtn",attrs:{href:t.pdfPath,download:"invoice"}},[t._v("下载")]),t._v(" "),s("message",{attrs:{msg:t.message,show:t.showMesage},on:{close:t.onCloseMessage}}),t._v(" "),t.showLoading?s("loading"):t._e()],1)},staticRenderFns:[]};var V=s("VU/8")(N,U,!1,function(t){s("Fw7l")},"data-v-afa24120",null).exports;i.a.use(o.a);var L=new o.a({mode:"history",base:"/edispatch/invoice",routes:[{path:"/view/pdfview",name:"pdfView",component:V},{path:"/view/success",name:"success",component:z},{path:"/view/create/",name:"createInvoice",component:T},{path:"/",name:"createInvoice",component:T}]});new i.a({el:"#app",router:L,components:{App:a},template:"<App/>"})},POKh:function(t,e,s){"use strict";var i={props:{initial:{type:Boolean,default:!1}},data:function(){return{size:{width:-1,height:-1}}},methods:{reset:function(){var t=this.$el.firstChild,e=this.$el.lastChild;t.scrollLeft=1e5,t.scrollTop=1e5,e.scrollLeft=1e5,e.scrollTop=1e5},update:function(){this.size.width=this.$el.offsetWidth,this.size.height=this.$el.offsetHeight}},watch:{size:{deep:!0,handler:function(t){this.reset(),this.$emit("resize",{width:this.size.width,height:this.size.height})}}},render:function(t){var e="position: absolute; left: 0; top: 0; right: 0; bottom: 0; overflow: hidden; z-index: -1; visibility: hidden;",s="position: absolute; left: 0; top: 0;";return t("div",{style:e+"animation-name: resizeSensorVisibility;",on:{"~animationstart":this.update}},[t("div",{style:e,on:{scroll:this.update}},[t("div",{style:s+"width: 100000px; height: 100000px;"})]),t("div",{style:e,on:{scroll:this.update}},[t("div",{style:s+"width: 200%; height: 200%;"})])])},beforeDestroy:function(){this.$emit("resize",{width:0,height:0}),this.$emit("resizeSensorBeforeDestroy")},mounted:function(){if(!0===this.initial&&this.$nextTick(this.update),this.$el.offsetParent!==this.$el.parentNode&&(this.$el.parentNode.style.position="relative"),"attachEvent"in this.$el&&!("AnimationEvent"in window)){var t=function(){this.update(),e()}.bind(this),e=function(){this.$el.detachEvent("onresize",t),this.$off("resizeSensorBeforeDestroy",e)}.bind(this);this.$el.attachEvent("onresize",t),this.$on("resizeSensorBeforeDestroy",e),this.reset()}}};var n=s("VU/8")(i,null,!1,function(t){s("8Y90")},null,null);e.a=n.exports},n1Mi:function(t,e){},o6MU:function(t,e){},sZAQ:function(t,e){},toNC:function(t,e){},wpyF:function(t,e){}},["NHnr"]);
//# sourceMappingURL=app.8696195efa46a5e93e4d.js.map